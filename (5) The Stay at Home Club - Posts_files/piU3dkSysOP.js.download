if (self.CavalryLogger) { CavalryLogger.start_js(["3VgEi"]); }

__d("StoriesSuspenseCardMediaContent_media.graphql",[],(function(a,b,c,d,e,f){"use strict";a=function(){var a={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null};return{argumentDefinitions:[{kind:"RootArgument",name:"blur"},{defaultValue:!1,kind:"LocalArgument",name:"prefetchPhotoUri"},{kind:"RootArgument",name:"scale"}],kind:"Fragment",metadata:null,name:"StoriesSuspenseCardMediaContent_media",selections:[a,{alias:"link_attachment",args:[{kind:"Literal",name:"if_style",value:"share"}],concreteType:"StoryAttachment",kind:"LinkedField",name:"attachments",plural:!0,selections:[{alias:null,args:null,kind:"ScalarField",name:"url",storageKey:null}],storageKey:'attachments(if_style:"share")'},{alias:null,args:null,concreteType:"StoryAttachment",kind:"LinkedField",name:"attachments",plural:!0,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"media",plural:!1,selections:[{alias:"blurredImage",args:[{kind:"Variable",name:"blur",variableName:"blur"},{kind:"Literal",name:"height",value:350},{kind:"Variable",name:"scale",variableName:"scale"}],concreteType:"Image",kind:"LinkedField",name:"image",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"uri",storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null},{kind:"InlineFragment",selections:[a],type:"Node",abstractKey:"__isNode"},{args:[{kind:"Variable",name:"prefetchPhotoUri",variableName:"prefetchPhotoUri"}],kind:"FragmentSpread",name:"StoriesCardPhotoMedia_photo"},{args:null,kind:"FragmentSpread",name:"StoriesCardVideoMedia_video"},{kind:"InlineFragment",selections:[{alias:null,args:[{kind:"Literal",name:"framework",value:"WARNING_SCREENS"},{kind:"Literal",name:"location",value:"story"}],concreteType:"CIXScreen",kind:"LinkedField",name:"cix_screen",plural:!1,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"view_model",plural:!1,selections:[{args:null,kind:"FragmentSpread",name:"StoriesSuspenseCardMediaWarningScreen_data"}],storageKey:null}],storageKey:'cix_screen(framework:"WARNING_SCREENS",location:"story")'}],type:"CanRenderCIXScreen",abstractKey:"__isCanRenderCIXScreen"}],storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"TextFormatMetadata",kind:"LinkedField",name:"text_format_metadata",plural:!1,selections:[{args:null,kind:"FragmentSpread",name:"StoriesCardComposerFormat_textFormatMetaData"}],storageKey:null},{alias:null,args:null,concreteType:"TextWithEntities",kind:"LinkedField",name:"message",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"text",storageKey:null},{args:null,kind:"FragmentSpread",name:"StoriesCardComposerFormat_message"}],storageKey:null},{alias:null,args:null,concreteType:"StoryBackgroundInfo",kind:"LinkedField",name:"story_default_background",plural:!1,selections:[{args:null,kind:"FragmentSpread",name:"StoriesCardComposerFormat_defaultBackground"}],storageKey:null},{args:null,kind:"FragmentSpread",name:"StoriesCardComposerFormat_story"},{args:null,kind:"FragmentSpread",name:"StoriesCardPhotoMedia_story"}],type:"Story",abstractKey:null}}();e.exports=a}),null);
__d("StoriesSuspenseCardMediaWarningScreen_data.graphql",[],(function(a,b,c,d,e,f){"use strict";a={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"StoriesSuspenseCardMediaWarningScreen_data",selections:[{documentName:"StoriesSuspenseCardMediaWarningScreen_data",fragmentName:"CometWarningScreenOverlay_data",fragmentPropName:"data",kind:"ModuleImport"}],type:"OverlayWarningScreenViewModel",abstractKey:null};e.exports=a}),null);
__d("StoriesSuspenseCardMediaWarningScreen.react",["CometRelay","React","stylex","StoriesSuspenseCardMediaWarningScreen_data.graphql"],(function(a,b,c,d,e,f){"use strict";e.exports=a;var g,h=b("React");function a(a){var c=a.blurredImageURI,d=a.contentID,e=a.data,f=a.onWarningScreenMounted;a=a.storyID;e=b("CometRelay").useFragment(g!==void 0?g:g=b("StoriesSuspenseCardMediaWarningScreen_data.graphql"),e);h.useEffect(function(){return f()},[f]);return h.jsx("div",{className:"du4w35lb",children:h.jsx(b("CometRelay").MatchContainer,{match:e,props:{allowReCoveringContent:!1,alwaysShowDetails:!0,alwaysUseSmallLayout:!1,contentID:d,data:e,mediaUri:c,storyID:a,surface:"story_viewer",url:null}})})}}),null);
__d("StoriesSuspenseCardMediaContent.react",["CometFeedAttachmentOverlayContext","CometRelay","React","StoriesCardComposerFormat.react","StoriesCardPhotoMedia.react","StoriesCardVideoMedia.react","StoriesEnums","StoriesGating","StoriesSuspenseCardMediaWarningScreen.react","StoriesSuspenseCardMediaContent_media.graphql"],(function(a,b,c,d,e,f){"use strict";var g,h=b("React"),i=new Set(Object.values(b("StoriesEnums").STORY_MEDIA_TYPES)),j=g!==void 0?g:g=b("StoriesSuspenseCardMediaContent_media.graphql");function a(a){var c,d,e,f,g=a.isMuted,k=a.isPaused,l=a.media,m=a.onImageLoad,n=a.onSeen,o=a.onTimerSourceUpdate,p=a.onVideoLoaded,q=a.onWarningScreenMounted;a=a.setPause;l=b("CometRelay").useFragment(j,l);c=l==null?void 0:(c=l.attachments)==null?void 0:c.filter(function(a){return i.has(a==null?void 0:(a=a.media)==null?void 0:a.__typename)});c=c==null?void 0:(c=c[0])==null?void 0:c.media;var r=c==null?void 0:c.__typename,s=c==null?void 0:c.id;d=b("StoriesGating").shouldEnableWarningScreens()?c==null?void 0:(d=c.cix_screen)==null?void 0:d.view_model:null;e=((l==null?void 0:l.link_attachment)&&(l==null?void 0:(e=l.link_attachment)==null?void 0:(e=e[0])==null?void 0:e.url))!=null;f=(l==null?void 0:(f=l.message)==null?void 0:f.text)!=null;f=f;var t=null;l&&c&&(f&&!e?t=h.jsx(b("StoriesCardComposerFormat.react"),{defaultBackground:l.story_default_background,disableVerticalPadding:!1,message:l.message,onImageLoad:m,setPause:a,story:l,textFormatMetaData:l.text_format_metadata}):r===b("StoriesEnums").STORY_MEDIA_TYPES.PHOTO?t=h.jsx(b("StoriesCardPhotoMedia.react"),{onImageLoad:m,photo:c,story:l}):r===b("StoriesEnums").STORY_MEDIA_TYPES.VIDEO&&(t=h.jsx(b("StoriesCardVideoMedia.react"),{isMuted:g,isPaused:k,onTimerSourceUpdate:o,onVideoLoaded:p,setPause:a,video:c})));var u=b("CometFeedAttachmentOverlayContext").useIsOverlayShown();m=(e=c==null?void 0:(f=c.blurredImage)==null?void 0:f.uri)!=null?e:null;h.useEffect(function(){u||n()},[n,u]);return h.jsxs(h.Fragment,{children:[!u&&t,d!=null&&h.jsx(b("StoriesSuspenseCardMediaWarningScreen.react"),{blurredImageURI:m,contentID:s,data:d,onWarningScreenMounted:q,storyID:l==null?void 0:l.id})]})}c=h.memo(a);e.exports=c}),null);
__d("VideoUploadProgressUtils",[],(function(a,b,c,d,e,f){"use strict";f.isEncodingFinished=a;f.getOptimizedProgress=b;f.getUpdatedProgress=c;var g=99.8;function a(a){return a==="finish"}function b(a,b,c,d,e){if(!e)return{progress:Math.max(b,a.progress),progressWithoutFake:a.progressWithoutFake};e={progress:b,progressWithoutFake:a.progressWithoutFake};var f=a.progress+b;if(!(b>0)||d>0&&f>d){e.progress=-1;return e}f=Number(f.toFixed(1));c==="finish"||c==="notify"?f=100:f>=100&&(f=a.progress<100?a.progress:g);e.progress=f;e.progressWithoutFake=f;return e}function c(a,b){var c={progress:b.progress,progressWithoutFake:b.progressWithoutFake};a.obj.cached_progress&&b.progress<a.obj.cached_progress&&(c={progress:a.obj.cached_progress,progressWithoutFake:a.obj.cached_progress});b=this.getOptimizedProgress(c,a.obj.progress,a.obj.stage,a.obj.max_percent?a.obj.max_percent:0,a.obj.sve_report);c.progress=b.progress;c.progressWithoutFake=b.progressWithoutFake;return c}}),null);